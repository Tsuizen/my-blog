---
slug: add-seo-sitemap
category: å‰ç«¯
categorySlug: frontend
title: ä¸ºåšå®¢æ·»åŠ SEOä¼˜åŒ–ä»¥åŠç«™ç‚¹åœ°å›¾
subtitle: ''
author: Tsuizen
description: æƒ³è¦è®©åšå®¢å†…å®¹åœ¨æœç´¢å¼•æ“ä¸­ååˆ—å‰èŒ…ï¼Œå¥½çš„seoä¼˜åŒ–æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå…³äºseoä¼˜åŒ–å·²ç»æˆäº†ä¸€é—¨å­¦é—®ï¼Œæœ¬æ–‡åœ¨åšå®¢ä¸­è¿›è¡Œäº†ä¸€ç•ªå®è·µ
tags:
  - Next.js
  - å‰ç«¯æ€§èƒ½ä¼˜åŒ–
  - SEO
featureImage: ''
createdAt: 2023-01-12
updatedAt: 2023-01-12
draft: false
---

## ä¸ºåšå®¢æ·»åŠ  SEO å’Œç«™ç‚¹åœ°å›¾

SEO çš„å­¦é—®éå¸¸å¤šï¼Œæœ¬åšå®¢å°½å¯èƒ½è´´è¿‘è°·æ­ŒæŒ‡å¯¼çš„è§„èŒƒå¯¹ seo è¿›è¡Œé…ç½®ã€‚

åœ¨ next.js é¡¹ç›®ä¸­æ·»åŠ  seo ä¸€èˆ¬ä½¿ç”¨`next-seo`ç¬¬ä¸‰æ–¹åº“ã€‚è¦åœ¨å…¨éƒ¨é¡µé¢é…ç½®é»˜è®¤ SEO éœ€è¦åœ¨`_app.tsx`æ–‡ä»¶ä¸­å¼•å…¥`DefaultSeo`ç»„ä»¶ã€‚

```tsx
export default function App() {

// ...

  const SEO = {
    defaultTitle: "Tsuizen's blog",
    titleTemplate: "%s | Tsuizen's blog",
    description: 'Tsuizençš„ä¸ªäººåšå®¢',
    canonical: "https://blog.tsuizen.cn",
    robotsProps: {
      noarchive: false, // ä¸æ˜¾ç¤ºç¼“å­˜é“¾æ¥
      nosnippet: false, // ä¸åœ¨æœç´¢ä¸­æ˜¾ç¤ºæ–‡æœ¬ç‰‡æ®µ
      maxSnippet: -1, // å€¼ä¸º-1è°·æ­Œä¼šæ˜¾ç¤ºä»–è®¤ä¸ºæœ€æœ‰æ•ˆçš„æ–‡æœ¬ç‰‡æ®µé•¿åº¦
      notranslate: false, // ä¸åœ¨æœç´¢ç»“æœä¸­æä¾›é¡µé¢ç¿»è¯‘
      noimageindex: false // ä¸è¦åœ¨æ­¤é¡µé¢ä¸Šä¸ºå›¾åƒç¼–åˆ¶ç´¢å¼•ã€‚å¦‚æœä¸æŒ‡å®šæ­¤å€¼ï¼Œé¡µé¢ä¸Šçš„å›¾åƒå¯èƒ½ä¼šè¢«ç¼–å…¥ç´¢å¼•å¹¶æ˜¾ç¤ºåœ¨æœç´¢ç»“æœä¸­ã€‚
    }
  };

  return {
    <DefaultSeo {...SEO} />
  }
}
```

ä»¥ä¸Šæ˜¯æˆ‘é€‰æ‹©çš„é»˜è®¤è®¾ç½®ï¼Œ`titleTemplate`ä¸­çš„ %s æ˜¯æ¯ä¸ªé¡µé¢å•ç‹¬è®¾ç½®çš„æ ‡é¢˜å†…å®¹ï¼Œè¿™æ ·æ‰€æœ‰çš„é¡µé¢å°±é»˜è®¤ä¼šæºå¸¦ %s
åé¢çš„æ¨¡æ¿ã€‚å…¶ä»–çš„é…ç½®å¯ä»¥å‚è€ƒ`next-seo`çš„[æ–‡æ¡£](https://github.com/garmeeh/next-seo)

æ¥ç€æ¥å•ç‹¬é…ç½®æ¯ä¸ªé¡µé¢çš„å†…å®¹ï¼Œéœ€è¦åœ¨ç›¸åº”é¡µé¢å¼•å…¥`NextSEO`ç»„ä»¶ï¼Œä»¥ post é¡µä¸ºä¾‹åœ¨`NextSEO`ç»„ä»¶ä¸­æ·»åŠ å¯¹åº”çš„å†…å®¹å³å¯ï¼Œ
æƒ³è¦åœ¨ç¤¾äº¤ç½‘ç«™åˆ†äº«æ—¶å‘ˆç°ä¸é”™çš„æ•ˆæœå°±éœ€è¦å¯¹ openGraph è¿›è¡Œé…ç½®

```tsx
<NextSeo
  {...SEO}
  title={post.title}
  description={post.description}
  canonical={'https://blog.tsuizen.cn/' + post.title}
  openGraph={{
    title: `${post.title}`,
    description: `${post.description}`,
    url: 'https://blog.tsuizen.cn/posts/' + post.title,
    type: 'article',
    article: {
      publishedTime: post.createdAt,
      modifiedTime: post.updatedAt,
      authors: ['Tsuizen'],
      tags: post.tags
    },
    images: []
  }}
/>
```

## ç»“æ„åŒ–æ•°æ® JSON-LD

æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ç½‘é¡µä¸­æ·»åŠ ç»“æ„åŒ–æ•°æ®è®©è°·æ­Œè¯»å–ï¼Œé’ˆå¯¹ä¸åŒçš„ç½‘é¡µç±»å‹ä½œä¸åŒçš„æœç´¢ç»“æœå‘ˆç°ã€‚
åœ¨åšå®¢é¡µé¢ï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ª Article çš„ç»“æ„åŒ–æ•°æ®ç”¨æ¥æè¿°æ–‡ç« ä¿¡æ¯

<Youtube videoId="vioCbTo3C-4" />

```tsx
<ArticleJsonLd
  url={`https://blog.tsuizen.cn/posts/${post.title}`}
  title={post.title}
  images={[]}
  datePublished={post.createdAt}
  dateModified={post.updatedAt}
  authorName={[
    {
      name: 'Tsuizen',
      url: 'https://blog.tsuizen.cn'
    }
  ]}
  publisherName="Tsuizen"
  publisherLogo="https://blog.tsuizen.cn/images/logo.png"
  description={post.description}
  isAccessibleForFree={true}
/>
```

åœ¨ç½‘é¡µä¸­ä¼šè¢«å±•å¼€æˆå¦‚ä¸‹å½¢å¼:

```html
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "datePublished": "2023-01-18T00:00:00.000Z",
    "description": "èº«ä¸ºç å†œæ€ä¹ˆèƒ½æ²¡æœ‰è‡ªå·±çš„åšå®¢ï¼Œç”±äºåšå®¢å›­çš„æ•´æ”¹é£æ³¢ï¼Œå‡ºäºå®‰å…¨åŸå› å†³å®šè‡ªå·±æ­å»ºï¼Œé¡ºä¾¿å¯ä»¥ç»ƒä¹ æŠ€æœ¯ä»¥åŠç£ä¿ƒè‡ªå·±æ›´æ–°ğŸ§ã€‚",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://blog.tsuizen.cn/posts/ä½¿ç”¨Next.jsæ„å»ºæˆ‘çš„ä¸ªäººåšå®¢"
    },
    "headline": "ä½¿ç”¨Next.jsæ„å»ºæˆ‘çš„ä¸ªäººåšå®¢",
    "image": [],
    "dateModified": "2023-01-18T00:00:00.000Z",
    "author": [
      { "@type": "Person", "name": "Tsuizen", "url": "https://blog.tsuizen.cn" }
    ],
    "publisher": {
      "@type": "Organization",
      "name": "Tsuizen",
      "logo": {
        "@type": "ImageObject",
        "url": "https://blog.tsuizen.cn/images/logo.png"
      }
    },
    "isAccessibleForFree": true
  }
</script>
```

è¿™æ ·è°·æ­Œå°±èƒ½æ ¹æ®ä½ çš„éœ€è¦å±•ç¤ºæ›´ä¸°å¯Œçš„æœç´¢ç»“æœã€‚

## ç«™ç‚¹åœ°å›¾

æœ€åå†æ¥è¯´è¯´ç«™ç‚¹åœ°å›¾çš„é—®é¢˜ï¼Œè¿™æ˜¯è°·æ­Œå®˜æ–¹ç»™å‡ºçš„å®šä¹‰ï¼š

> ç«™ç‚¹åœ°å›¾æ˜¯ä¸€ç§æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æä¾›ä¸æ‚¨ç½‘ç«™ä¸­çš„ç½‘é¡µã€è§†é¢‘æˆ–å…¶ä»–æ–‡ä»¶æœ‰å…³çš„ä¿¡æ¯ï¼Œè¿˜å¯ä»¥è¯´æ˜è¿™äº›å†…å®¹ä¹‹é—´çš„å…³ç³»ã€‚Google ç­‰æœç´¢å¼•æ“ä¼šè¯»å–æ­¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°æŠ“å–æ‚¨çš„ç½‘ç«™ã€‚ç«™ç‚¹åœ°å›¾ä¼šå‘Šè¯‰ Google æ‚¨è®¤ä¸ºç½‘ç«™ä¸­çš„å“ªäº›ç½‘é¡µå’Œæ–‡ä»¶æ¯”è¾ƒé‡è¦ï¼Œè¿˜ä¼šæä¾›ä¸è¿™äº›æ–‡ä»¶æœ‰å…³çš„é‡è¦ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œç½‘é¡µä¸Šæ¬¡æ›´æ–°çš„æ—¶é—´å’Œç½‘é¡µæ˜¯å¦æœ‰ä»»ä½•å¤‡ç”¨çš„è¯­è¨€ç‰ˆæœ¬ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`next-sitemap`æ¥ç”Ÿæˆç«™ç‚¹åœ°å›¾

é¦–å…ˆåœ¨æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶`next-sitemap.config.js`ï¼Œæ·»åŠ åœ°å€ï¼Œæ›´æ–°é¢‘ç‡ç­‰éœ€è¦çš„å±æ€§ï¼Œç„¶åæ ¹æ®éœ€è¦å¯ä»¥åœ¨ `transform` å‡½æ•°ä¸­é…ç½®ä¸åŒç›¸å¯¹è·¯å¾„ä¸­çš„å±æ€§
ï¼Œè¿™é‡Œæˆ‘ä¿®æ”¹äº†ä¸åŒé¡µé¢å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œæ›´å¤šçš„å±æ€§ç”¨æ³•å¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://github.com/iamvishnusankar/next-sitemap)

```javascript
/** @type {import('next-sitemap').IConfig} */

module.exports = {
  siteUrl: 'https://blog.tsuizen.cn',
  changefreq: 'daily',
  priority: 1,
  sitemapSize: 5000,
  generateRobotsTxt: true,
  // exclude: ['/protected-page', '/awesome/secret-page'],
  // alternateRefs: [
  //   {
  //     href: 'https://blog.tsuizen.cn',
  //     hreflang: 'cn'
  //   }
  // ],
  // Default transformation function
  transform: async (config, path) => {
    const result = {
      loc: 'https://blog.tsuizen.cn' + path, // => this will be exported as http(s)://<config.siteUrl>/<path>
      changefreq: config.changefreq,
      priority: config.priority,
      lastmod: config.autoLastmod ? new Date().toISOString() : undefined,
      alternateRefs: config.alternateRefs ?? []
    };
    if (path.startsWith('/tag')) {
      result.priority = 0.6;
    }
    if (path.startsWith('/posts')) {
      result.priority = 1;
      this.changefreq = 'always';
    }
    if (path.startsWith('/category')) {
      result.priority = 0.4;
    }
    if (path.startsWith('/archives')) {
      result.priority = 0.3;
    }
    return result;
  },
  // additionalPaths: async (config) => [
  //   await config.transform(config, '/additional-page')
  // ],
  robotsTxtOptions: {
    policies: [
      {
        userAgent: '*',
        allow: '/'
      },
      {
        userAgent: 'test-bot',
        allow: ['/path', '/path-2']
      }
      // {
      //   userAgent: 'black-listed-bot',
      //   disallow: ['/sub-path-1', '/path-2']
      // }
    ],
    additionalSitemaps: []
  }
};
```

æœ€ååœ¨`package.json`ä¸­å¯ä»¥åœ¨ `postbuild` å‘¨æœŸé…ç½®æ‰§è¡Œè„šæœ¬

```json
"postbuild": "next-sitemap",
```

ç„¶åæˆ‘ä»¬å°±èƒ½çœ‹åˆ° public ä¸‹ç”Ÿæˆäº†å¯¹åº”çš„ç«™ç‚¹ xml æ–‡ä»¶å’Œ robots.txt
