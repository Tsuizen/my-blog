---
slug: buil-my-blog
category: å‰ç«¯
categorySlug: frontend
title: ä½¿ç”¨Next.jsæ„å»ºæˆ‘çš„ä¸ªäººåšå®¢
subtitle: ''
author: Tsuizen
description: èº«ä¸ºç å†œæ€ä¹ˆèƒ½æ²¡æœ‰è‡ªå·±çš„åšå®¢ï¼Œç”±äºåšå®¢å›­çš„æ•´æ”¹é£æ³¢ï¼Œå‡ºäºå®‰å…¨åŸå› å†³å®šè‡ªå·±æ­å»ºï¼Œé¡ºä¾¿å¯ä»¥ç»ƒä¹ æŠ€æœ¯ä»¥åŠç£ä¿ƒè‡ªå·±æ›´æ–°ğŸ§ã€‚
tags:
  - Next.js
  - å‰ç«¯æ€§èƒ½ä¼˜åŒ–
featureImage: ''
createdAt: 2023-01-18
updatedAt: 2023-01-18
draft: false
---

## æ¡†æ¶é€‰æ‹©

æˆ‘å¯¹åšå®¢çš„éœ€æ±‚ä¸éœ€è¦è¿‡äºå¤æ‚çš„äº¤äº’ï¼Œå¿«é€Ÿå“åº”ï¼Œå±•ç¤ºå†…å®¹æ‰æ˜¯æœ€é‡è¦çš„ï¼Œå› æ­¤è€ƒè™‘æœåŠ¡ç«¯æ¸²æŸ“çš„æ–¹å¼ã€‚

æˆ‘çš„æŠ€æœ¯æ ˆåå‘äº Reactï¼Œå› æ­¤ Nuxt.jsï¼ŒVuepress é¦–å…ˆè¢«æ’é™¤åœ¨å¤–ï¼ŒReact å…ƒæ¡†æ¶æœ‰ Gatsbyï¼ŒNext.jsï¼ŒRemix
ä»¥åŠåŒæ—¶æ”¯æŒ Reactï¼ŒVue å’Œ Svelte çš„ Astroã€‚å…¶ä¸­ Gatsby çš„æ•°æ®æ¥æºå’Œ GraphQL å¼ºç»‘å®šï¼Œè™½ç„¶å®ƒæœ‰ä¸°å¯Œçš„åšå®¢ç›¸å…³ç”Ÿæ€ï¼Œ
ä½†æˆ‘æƒ³è¦ä¸€ç§æ›´é€šç”¨çš„å¼€å‘æ¡†æ¶å› æ­¤è¢«æ’é™¤åœ¨å¤–ã€‚Remix å’Œ Astro é£å¤´æ­£åŠ²ï¼Œä½†æ˜¯æˆ‘å¯¹ä¸¤è€…çš„äº†è§£ä¸å¤šï¼ŒNext.js
ä¼¼ä¹å°±æˆäº†ç›®å‰çš„ä¸äºŒé€‰æ‹©ï¼ˆå…¶å®å·²ç»åœ¨è€ƒè™‘ç”¨æ–°æŠ€æœ¯é‡æ„äº† ğŸ¤”

## å…³äº MDX

> MDX æ˜¯ä¸€ç§ä¹¦å†™æ ¼å¼ï¼Œå…è®¸ä½ åœ¨ Markdown æ–‡æ¡£ä¸­æ— ç¼åœ°æ’å…¥ JSX ä»£ç ã€‚ ä½ è¿˜å¯ä»¥å¯¼å…¥ï¼ˆimportï¼‰ç»„ä»¶ï¼Œä¾‹å¦‚äº¤äº’å¼å›¾è¡¨æˆ–å¼¹æ¡†ï¼Œå¹¶å°†å®ƒä»¬ åµŒå…¥åˆ°å†…å®¹å½“ä¸­ã€‚ è¿™ä½¿å¾—ç”¨ç»„ä»¶ç¼–å†™è¾ƒé•¿çš„å†…å®¹å½¢æˆäº† ä¸€åœºå†²å‡» ğŸš€ã€‚

åœ¨ Next.js ä¸­å¯ä»¥é€šè¿‡ `next/mdx` å®˜æ–¹æ’ä»¶æˆ–è€…ç¬¬ä¸‰æ–¹åº“æ¥å¤„ç† MDX æ–‡ä»¶ã€‚

- `next/mdx` å…¶å®å°±æ˜¯å°† MDX æ–‡ä»¶äº¤ç»™ Webpack è¿›è¡Œç¼–è¯‘å¤„ç†ï¼Œå¹¶å°†å…¶è§†ä½œä¸€ä¸ªå•ç‹¬çš„é¡µé¢ã€‚
  ä½†æ˜¯æ¯æ¬¡æ–°å¢æ’ä»¶æˆ–è€…è‡ªå®šä¹‰ç»„ä»¶éƒ½è¦åœ¨ next.config.js æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œå¼€å‘ä½“éªŒå¹¶ä¸å‹å¥½ã€‚
- å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“æœ‰ `next-mdx-remote` å’Œ `mdx-bundler`ï¼Œå…¶ä¸­ `mdx-bundler` å¯ä»¥å¯¼å…¥å¤–éƒ¨ç»„ä»¶ï¼Œ
  å› è€Œæˆäº†æˆ‘çš„é¦–é€‰é¡¹ã€‚

å…³äºæ€ä¹ˆåœ¨ Next.js ä¸­ä½¿ç”¨ MDX ç¯‡å¹…æœ‰é™ï¼Œæˆ‘ä¼šå†å†™ä¸€ç¯‡æ–‡ç« è¯¦ç»†å±•å¼€ã€‚

## åŸå­åŒ– CSS æ¡†æ¶

å‰ç«¯ JS æ¡†æ¶å¯è°“æ—¥æ–°æœˆå¼‚ï¼Œæå¤§åœ°æ‰©å±•äº†å·¥ç¨‹éš¾åº¦ã€‚è€Œåœ¨ CSS é¢†åŸŸï¼ŒBEMï¼ŒCSS Module ç­‰éƒ½æ˜¯é¡ºåº”è¿™ä¸€å˜åŒ–çš„äº§ç‰©ã€‚
è¿‘å¹´æ¥ï¼ŒåŸå­åŒ–æ¡†æ¶çš„æ¦‚å¿µåœ¨å›½å¤–å—åˆ°å¹¿æ³›è¿½æ§ï¼Œ[Tailwindcss](https://www.tailwindcss.cn/docs) å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚

ä¸€å¼€å§‹æˆ‘æ˜¯æ¯”è¾ƒæŠ—æ‹’ä½¿ç”¨å®ƒçš„ï¼Œå…¶ç†å¿µå’Œå‰ç«¯å…¥é—¨æ—¶å—åˆ°çš„è§„èŒƒæ•™è‚²èƒŒé“è€Œé©°ã€‚ç„¶è€Œåœ¨è·Ÿéšæ½®æµè¯•ç”¨ä¹‹åæˆ‘è¿˜æ˜¯åŠ å…¥äº†çœŸé¦™å¤§å†›ã€‚

å…³äºç»´æŠ¤å›°éš¾æˆ‘ä¸ªäººå¹¶æœªæ„Ÿå—åˆ°ï¼ˆæˆ–è®¸æ˜¯å› ä¸ºä¸ªäººé¡¹ç›®çš„åŸå› ï¼‰ï¼Œåœ¨ class ä¸­ç›´æ¥å†™è¯­ä¹‰åŒ–ç±»åå¹¶é…åˆ vscode
æ’ä»¶åå€’æ˜¯è®©æˆ‘æ‘†è„±äº†æ¥å›åˆ‡æ¢æ–‡ä»¶ï¼Œä»¥åŠæ€è€ƒæŸäº›å†·é—¨ css å±æ€§ç”¨æ³•çš„çƒ¦æ¼ã€‚å¹¶ä¸”æ¡†æ¶è‡ªå¸¦çš„è§„èŒƒæ ·å¼ä»¥åŠåŸºäº TailwindCSS
çš„ [DaisyUI](https://daisyui.com/) è®©æˆ‘è¿™ä¸ªè®¾è®¡ç›²ä¹Ÿèƒ½è½»æ¾å†™å‡ºä¸é‚£ä¹ˆéš¾çœ‹çš„é¡µé¢æ¥ã€‚ åŒæ—¶å€ŸåŠ© TailwindCSS çš„è‡ªå®šä¹‰åŠŸèƒ½ï¼Œè®©æˆ‘åœ¨å®ç°æ·±è‰²æ¨¡å¼æ—¶å…å»äº†ä¸å°‘éº»çƒ¦ã€‚

ä½†æ˜¯å®Œå…¨è„±ç¦»æ‰‹å†™ CSS ä¹Ÿå¹¶ä¸ç°å®ï¼Œä¾‹å¦‚åœ¨é…ç½® grid-area ä»¥åŠå®šä¹‰ MDX ç»„ä»¶æ ·å¼æ—¶å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚å› æ­¤æˆ‘åŒæ—¶ä½¿ç”¨äº†
SCSS è¿›è¡Œè¡¥å……ï¼Œè€Œä¸”åœ¨ css æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥å¤ç”¨ TailwindCSS å±æ€§ã€‚

```css
h1 {
  @apply text-4xl mt-14 mb-10;
}
```

## æˆ–è®¸æ˜¯ React æœ€ä½³çš„çŠ¶æ€ç®¡ç†åº“

## RSS è®¢é˜…æ”¯æŒ

> RSS(Really Simple Syndication)æ˜¯ä¸€ç§æè¿°å’ŒåŒæ­¥ç½‘ç«™å†…å®¹çš„æ ¼å¼ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªç½‘ç«™çš„æ›´æ–°æ‘˜è¦ï¼Œé€šå¸¸é‡‡ç”¨å¸¦æœ‰é“¾æ¥çš„æ–‡ç« åˆ—è¡¨çš„å½¢å¼ã€‚

ç°åœ¨ä½¿ç”¨ RSS è®¢é˜…çš„äººè¶Šæ¥è¶Šå°‘äº†ï¼Œä½†æ˜¯å¯¹æˆ‘è€Œè¨€ï¼Œåœ¨ä¿¡æ¯è¿‡å‰©çš„æ—¶ä»£é€šè¿‡ RSS è¿‡æ»¤ä¸ç›¸å¹²çš„æ¨èä¿¡æ¯æ˜¯ä¿æŒé«˜æ•ˆè·å–ä¿¡æ¯çš„å¿…è¦æ‰‹æ®µã€‚
æœ¬ç« æˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨åšå®¢ä¸­æ·»åŠ  RSS è®¢é˜…åŠŸèƒ½

ä¸ºä¸ªäººåšå®¢æ·»åŠ  RSS æ”¯æŒéœ€è¦ç”¨åˆ°ä¸€ä¸ªåŒååŒ…

```shell
pnpm add rss -D
```

æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ª RSS å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†ä½ åšå®¢çš„æ ‡é¢˜ï¼Œæè¿°ï¼Œurl ç­‰ä¿¡æ¯

```typescript
const feed = new RSS({
  title: "Tsuizen's blog",
  description: 'éšä¾¿å†™ä¸œè¥¿çš„åœ°æ–¹ï¼Œä¸»è¦ä»¥å‰ç«¯å†…å®¹ä¸ºä¸»',
  site_url: siteUrl,
  feed_url: `${siteUrl}/feed.xml`,
  language: 'cn',
  pubDate: new Date(),
  copyright: `All rights reserved ${new Date().getFullYear()}, Tsuizen`
});
```

å…¨éƒ¨å±æ€§å¯å‚è€ƒ[RSS channel å±æ€§](https://www.runoob.com/rss/rss-channel.html)

ç„¶åéå†æ‰€æœ‰çš„æ–‡ç« å¹¶æ·»åŠ æ–‡ç« ä¿¡æ¯

```typescript
allPosts.map((post) => {
  feed.item({
    title: post.title,
    url: `${siteUrl}/posts/${post.title}`,
    date: post.date,
    description: post.description
  });
});
```

å¯ä»¥æ·»åŠ çš„ä¿¡æ¯è¯·å‚è€ƒ[RSS item å…ƒç´ ](https://www.runoob.com/rss/rss-item.html)

æœ€åå°†å…¶å†™å…¥ public ç›®å½•å³å¯ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹

```typescript
import { writeFileSync } from 'fs';
import RSS from 'rss';

import { Post } from '@/types';

import { getRecentPosts } from './posts';

type RSSPost = Pick<Post, 'title' | 'createdAt' | 'description'> & {
  date: Date;
  url: string;
};

const getRSS = async () => {
  const siteUrl = process.env.SITE_URL;
  const allPosts = await getRecentPosts<RSSPost>([
    'title',
    'createdAt',
    'description'
  ]);

  const feed = new RSS({
    title: "Tsuizen's blog",
    description: 'éšä¾¿å†™ä¸œè¥¿çš„åœ°æ–¹ï¼Œä¸»è¦ä»¥å‰ç«¯å†…å®¹ä¸ºä¸»',
    site_url: siteUrl,
    feed_url: `${siteUrl}/feed.xml`,
    language: 'cn',
    pubDate: new Date(),
    copyright: `All rights reserved ${new Date().getFullYear()}, Tsuizen`
  });

  allPosts.map((post) => {
    feed.item({
      title: post.title,
      url: `${siteUrl}/posts/${post.title}`,
      date: post.date,
      description: post.description
    });
  });

  writeFileSync('./public/feed.xml', feed.xml({ indent: true }));
};

export default getRSS;
```

è¦è®©åšå®¢åœ¨ build æ—¶æ›´æ–° xml æ–‡ä»¶ï¼Œè¿˜éœ€è¦åœ¨ `page/index.tsx` ä¸­çš„ `getStaticProps` æ·»åŠ æ‰§è¡Œè¯­å¥ï¼Œ

```typescript
export async function getStaticProps() {
  ...

  await getRSS();

  ...
}
```

ç°åœ¨ build é¡¹ç›®åå°±å¯ä»¥çœ‹è§ public ç›®å½•ä¸­ç”Ÿæˆäº† `feed.xml`ï¼Œè®¿é—®`/feed.xml`å°±å¯ä»¥è®¢é˜… RSS äº†

## ä¸ºåšå®¢æ·»åŠ  SEO å’Œç«™ç‚¹åœ°å›¾
