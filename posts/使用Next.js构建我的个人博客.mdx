---
slug: buil-my-blog
category: å‰ç«¯
categorySlug: frontend
title: ä½¿ç”¨Next.jsæ„å»ºæˆ‘çš„ä¸ªäººåšå®¢
subtitle: ''
author: Tsuizen
description: èº«ä¸ºç å†œæ€ä¹ˆèƒ½æ²¡æœ‰è‡ªå·±çš„åšå®¢ï¼Œç”±äºåšå®¢å›­çš„æ•´æ”¹é£æ³¢ï¼Œå‡ºäºå®‰å…¨åŸå› å†³å®šè‡ªå·±æ­å»ºï¼Œé¡ºä¾¿å¯ä»¥ç»ƒä¹ æŠ€æœ¯ä»¥åŠç£ä¿ƒè‡ªå·±æ›´æ–°ğŸ§ã€‚
tags:
  - Next.js
  - å‰ç«¯æ€§èƒ½ä¼˜åŒ–
featureImage: ''
createdAt: 2023-01-18
draft: true
---

## æ¡†æ¶é€‰æ‹©

æˆ‘å¯¹åšå®¢çš„éœ€æ±‚ä¸éœ€è¦è¿‡äºå¤æ‚çš„äº¤äº’ï¼Œå¿«é€Ÿå“åº”ï¼Œå±•ç¤ºå†…å®¹æ‰æ˜¯æœ€é‡è¦çš„ï¼Œå› æ­¤è€ƒè™‘æœåŠ¡ç«¯æ¸²æŸ“çš„æ–¹å¼ã€‚

æˆ‘çš„æŠ€æœ¯æ ˆåå‘äº Reactï¼Œå› æ­¤ Nuxt.jsï¼ŒVuepress é¦–å…ˆè¢«æ’é™¤åœ¨å¤–ï¼ŒReact å…ƒæ¡†æ¶æœ‰ Gatsbyï¼ŒNext.jsï¼ŒRemix
ä»¥åŠåŒæ—¶æ”¯æŒ Reactï¼ŒVue å’Œ Svelte çš„ Astroã€‚å…¶ä¸­ Gatsby çš„æ•°æ®æ¥æºå’Œ GraphQL å¼ºç»‘å®šï¼Œè™½ç„¶å®ƒæœ‰ä¸°å¯Œçš„åšå®¢ç›¸å…³ç”Ÿæ€ï¼Œ
ä½†æˆ‘æƒ³è¦ä¸€ç§æ›´é€šç”¨çš„å¼€å‘æ¡†æ¶å› æ­¤è¢«æ’é™¤åœ¨å¤–ã€‚Remix å’Œ Astro é£å¤´æ­£åŠ²ï¼Œä½†æ˜¯æˆ‘å¯¹ä¸¤è€…çš„äº†è§£ä¸å¤šï¼ŒNext.js
ä¼¼ä¹å°±æˆäº†ç›®å‰çš„ä¸äºŒé€‰æ‹©ï¼ˆå…¶å®å·²ç»åœ¨è€ƒè™‘ç”¨æ–°æŠ€æœ¯é‡æ„äº† ğŸ¤”

## å…³äº MDX

> MDX æ˜¯ä¸€ç§ä¹¦å†™æ ¼å¼ï¼Œå…è®¸ä½ åœ¨ Markdown æ–‡æ¡£ä¸­æ— ç¼åœ°æ’å…¥ JSX ä»£ç ã€‚ ä½ è¿˜å¯ä»¥å¯¼å…¥ï¼ˆimportï¼‰ç»„ä»¶ï¼Œä¾‹å¦‚äº¤äº’å¼å›¾è¡¨æˆ–å¼¹æ¡†ï¼Œå¹¶å°†å®ƒä»¬ åµŒå…¥åˆ°å†…å®¹å½“ä¸­ã€‚ è¿™ä½¿å¾—ç”¨ç»„ä»¶ç¼–å†™è¾ƒé•¿çš„å†…å®¹å½¢æˆäº† ä¸€åœºå†²å‡» ğŸš€ã€‚

åœ¨ Next.js ä¸­å¯ä»¥é€šè¿‡ `next/mdx` å®˜æ–¹æ’ä»¶æˆ–è€…ç¬¬ä¸‰æ–¹åº“æ¥å¤„ç† MDX æ–‡ä»¶ã€‚

- `next/mdx` å…¶å®å°±æ˜¯å°† MDX æ–‡ä»¶äº¤ç»™ Webpack è¿›è¡Œç¼–è¯‘å¤„ç†ï¼Œå¹¶å°†å…¶è§†ä½œä¸€ä¸ªå•ç‹¬çš„é¡µé¢ã€‚
  ä½†æ˜¯æ¯æ¬¡æ–°å¢æ’ä»¶æˆ–è€…è‡ªå®šä¹‰ç»„ä»¶éƒ½è¦åœ¨ next.config.js æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œå¼€å‘ä½“éªŒå¹¶ä¸å‹å¥½ã€‚
- å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“æœ‰ `next-mdx-remote` å’Œ `mdx-bundler`ï¼Œå…¶ä¸­ `mdx-bundler` å¯ä»¥å¯¼å…¥å¤–éƒ¨ç»„ä»¶ï¼Œ
  å› è€Œæˆäº†æˆ‘çš„é¦–é€‰é¡¹ã€‚

å…³äºæ€ä¹ˆåœ¨ Next.js ä¸­ä½¿ç”¨ MDX ç¯‡å¹…æœ‰é™ï¼Œæˆ‘ä¼šå†å†™ä¸€ç¯‡æ–‡ç« è¯¦ç»†å±•å¼€ã€‚

## åŸå­åŒ– CSS æ¡†æ¶

å‰ç«¯ JS æ¡†æ¶å¯è°“æ—¥æ–°æœˆå¼‚ï¼Œæå¤§åœ°æ‰©å±•äº†å·¥ç¨‹éš¾åº¦ã€‚è€Œåœ¨ CSS é¢†åŸŸï¼ŒBEMï¼ŒCSS Module ç­‰éƒ½æ˜¯é¡ºåº”è¿™ä¸€å˜åŒ–çš„äº§ç‰©ã€‚
è¿‘å¹´æ¥ï¼ŒåŸå­åŒ–æ¡†æ¶çš„æ¦‚å¿µåœ¨å›½å¤–å—åˆ°å¹¿æ³›è¿½æ§ï¼Œ[Tailwindcss](https://www.tailwindcss.cn/docs) å°±æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ã€‚

ä¸€å¼€å§‹æˆ‘æ˜¯æ¯”è¾ƒæŠ—æ‹’ä½¿ç”¨å®ƒçš„ï¼Œå…¶ç†å¿µå’Œå‰ç«¯å…¥é—¨æ—¶å—åˆ°çš„è§„èŒƒæ•™è‚²èƒŒé“è€Œé©°ã€‚ç„¶è€Œåœ¨è·Ÿéšæ½®æµè¯•ç”¨ä¹‹åæˆ‘è¿˜æ˜¯åŠ å…¥äº†çœŸé¦™å¤§å†›ã€‚

å…³äºç»´æŠ¤å›°éš¾æˆ‘ä¸ªäººå¹¶æœªæ„Ÿå—åˆ°ï¼ˆæˆ–è®¸æ˜¯å› ä¸ºä¸ªäººé¡¹ç›®çš„åŸå› ï¼‰ï¼Œåœ¨ class ä¸­ç›´æ¥å†™è¯­ä¹‰åŒ–ç±»åå¹¶é…åˆ vscode
æ’ä»¶åå€’æ˜¯è®©æˆ‘æ‘†è„±äº†æ¥å›åˆ‡æ¢æ–‡ä»¶ï¼Œä»¥åŠæ€è€ƒæŸäº›å†·é—¨ css å±æ€§ç”¨æ³•çš„çƒ¦æ¼ã€‚å¹¶ä¸”æ¡†æ¶è‡ªå¸¦çš„è§„èŒƒæ ·å¼ä»¥åŠåŸºäº TailwindCSS
çš„ [DaisyUI](https://daisyui.com/) è®©æˆ‘è¿™ä¸ªè®¾è®¡ç›²ä¹Ÿèƒ½è½»æ¾å†™å‡ºä¸é‚£ä¹ˆéš¾çœ‹çš„é¡µé¢æ¥ã€‚ åŒæ—¶å€ŸåŠ© TailwindCSS çš„è‡ªå®šä¹‰åŠŸèƒ½ï¼Œè®©æˆ‘åœ¨å®ç°æ·±è‰²æ¨¡å¼æ—¶å…å»äº†ä¸å°‘éº»çƒ¦ã€‚

ä½†æ˜¯å®Œå…¨è„±ç¦»æ‰‹å†™ CSS ä¹Ÿå¹¶ä¸ç°å®ï¼Œä¾‹å¦‚åœ¨é…ç½® grid-area ä»¥åŠå®šä¹‰ MDX ç»„ä»¶æ ·å¼æ—¶å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚å› æ­¤æˆ‘åŒæ—¶ä½¿ç”¨äº†
SCSS è¿›è¡Œè¡¥å……ï¼Œè€Œä¸”åœ¨ css æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥å¤ç”¨ TailwindCSS å±æ€§ã€‚

```css
h1 {
  @apply text-4xl mt-14 mb-10;
}
```

## RSS è®¢é˜…æ”¯æŒ

> RSS(Really Simple Syndication)æ˜¯ä¸€ç§æè¿°å’ŒåŒæ­¥ç½‘ç«™å†…å®¹çš„æ ¼å¼ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªç½‘ç«™çš„æ›´æ–°æ‘˜è¦ï¼Œé€šå¸¸é‡‡ç”¨å¸¦æœ‰é“¾æ¥çš„æ–‡ç« åˆ—è¡¨çš„å½¢å¼ã€‚

ç°åœ¨ä½¿ç”¨ RSS è®¢é˜…çš„äººè¶Šæ¥è¶Šå°‘äº†ï¼Œä½†æ˜¯å¯¹æˆ‘è€Œè¨€ï¼Œåœ¨ä¿¡æ¯è¿‡å‰©çš„æ—¶ä»£é€šè¿‡ RSS è¿‡æ»¤ä¸ç›¸å¹²çš„æ¨èä¿¡æ¯æ˜¯ä¿æŒé«˜æ•ˆè·å–ä¿¡æ¯çš„å¿…è¦æ‰‹æ®µã€‚
æœ¬ç« æˆ‘ä¼šä»‹ç»å¦‚ä½•åœ¨åšå®¢ä¸­æ·»åŠ  RSS è®¢é˜…åŠŸèƒ½

ä¸ºä¸ªäººåšå®¢æ·»åŠ  RSS æ”¯æŒéœ€è¦ç”¨åˆ°ä¸€ä¸ªåŒååŒ…

```shell
pnpm add rss -D
```

æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ª RSS å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†ä½ åšå®¢çš„æ ‡é¢˜ï¼Œæè¿°ï¼Œurl ç­‰ä¿¡æ¯

```typescript
const feed = new RSS({
  title: "Tsuizen's blog",
  description: 'éšä¾¿å†™ä¸œè¥¿çš„åœ°æ–¹',
  site_url: siteUrl,
  feed_url: `${siteUrl}/feed.xml`,
  language: 'cn',
  pubDate: new Date(),
  copyright: `All rights reserved ${new Date().getFullYear()}, Tsuizen`
});
```

å…¨éƒ¨å±æ€§å¯å‚è€ƒ[RSS channel å±æ€§](https://www.runoob.com/rss/rss-channel.html)

ç„¶åéå†æ‰€æœ‰çš„æ–‡ç« å¹¶æ·»åŠ æ–‡ç« ä¿¡æ¯

```typescript
allPosts.map((post) => {
  feed.item({
    title: post.title,
    url: `${siteUrl}/posts/${post.title}`,
    date: post.date,
    description: post.description
  });
});
```

å¯ä»¥æ·»åŠ çš„ä¿¡æ¯è¯·å‚è€ƒ[RSS item å…ƒç´ ](https://www.runoob.com/rss/rss-item.html)

æœ€åå°†å…¶å†™å…¥ public ç›®å½•å³å¯ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹

```typescript
import { writeFileSync } from 'fs';
import RSS from 'rss';

import { Post } from '@/types';

import { getRecentPosts } from './posts';

type RSSPost = Pick<Post, 'title' | 'createdAt' | 'description'> & {
  date: Date;
  url: string;
};

const getRSS = async () => {
  const siteUrl = process.env.SITE_URL;
  const allPosts = await getRecentPosts<RSSPost>([
    'title',
    'createdAt',
    'description'
  ]);

  const feed = new RSS({
    title: "Tsuizen's blog",
    description: 'éšä¾¿å†™ä¸œè¥¿çš„åœ°æ–¹',
    site_url: siteUrl,
    feed_url: `${siteUrl}/feed.xml`,
    language: 'cn',
    pubDate: new Date(),
    copyright: `All rights reserved ${new Date().getFullYear()}, Tsuizen`
  });

  allPosts.map((post) => {
    feed.item({
      title: post.title,
      url: `${siteUrl}/posts/${post.title}`,
      date: post.date,
      description: post.description
    });
  });

  writeFileSync('./public/feed.xml', feed.xml({ indent: true }));
};

export default getRSS;
```

è¦è®©åšå®¢èƒ½å¤ŸåŠæ—¶æ›´æ–° xml æ–‡ä»¶ï¼Œè¿˜éœ€è¦åœ¨ `page/index.tsx` ä¸­çš„ `getStaticProps` æ·»åŠ æ‰§è¡Œè¯­å¥ï¼Œ

```typescript
export async function getStaticProps() {
  ...

  await getRSS();

  ...
}
```

ç°åœ¨è¿è¡Œé¡¹ç›®åå°±å¯ä»¥çœ‹è§ public ç›®å½•ä¸­ç”Ÿæˆäº† `feed.xml`ï¼Œè®¿é—®`/feed.xml`å°±å¯ä»¥è®¢é˜… RSS äº†

## ä¸ºåšå®¢æ·»åŠ  SEO å’Œç«™ç‚¹åœ°å›¾

SEO çš„å­¦é—®éå¸¸å¤šï¼Œæœ¬åšå®¢å°½å¯èƒ½è´´è¿‘è°·æ­ŒæŒ‡å¯¼çš„è§„èŒƒå¯¹ seo è¿›è¡Œé…ç½®ã€‚

åœ¨ next.js é¡¹ç›®ä¸­æ·»åŠ  seo ä¸€èˆ¬ä½¿ç”¨`next-seo`ç¬¬ä¸‰æ–¹åº“ã€‚é¦–å…ˆè¿›è¡Œé»˜è®¤ SEO çš„é…ç½®ã€‚

è¦åœ¨å…¨éƒ¨é¡µé¢é…ç½®é»˜è®¤ SEO éœ€è¦åœ¨`_app.tsx`æ–‡ä»¶ä¸­å¼•å…¥`DefaultSeo`

```tsx
export default function App() {

// ...

  const SEO = {
    defaultTitle: "Tsuizen's blog",
    titleTemplate: "%s | Tsuizen's blog",
    description: 'Tsuizençš„ä¸ªäººåšå®¢',
    canonical: "https://tsuizen.cn",
    robotsProps: {
      noarchive: false, // ä¸æ˜¾ç¤ºç¼“å­˜é“¾æ¥
      nosnippet: false, // ä¸åœ¨æœç´¢ä¸­æ˜¾ç¤ºæ–‡æœ¬ç‰‡æ®µ
      maxSnippet: -1, // å€¼ä¸º-1è°·æ­Œä¼šæ˜¾ç¤ºä»–è®¤ä¸ºæœ€æœ‰æ•ˆçš„æ–‡æœ¬ç‰‡æ®µé•¿åº¦
      notranslate: false, // ä¸åœ¨æœç´¢ç»“æœä¸­æä¾›é¡µé¢ç¿»è¯‘
      noimageindex: false // ä¸è¦åœ¨æ­¤é¡µé¢ä¸Šä¸ºå›¾åƒç¼–åˆ¶ç´¢å¼•ã€‚å¦‚æœä¸æŒ‡å®šæ­¤å€¼ï¼Œé¡µé¢ä¸Šçš„å›¾åƒå¯èƒ½ä¼šè¢«ç¼–å…¥ç´¢å¼•å¹¶æ˜¾ç¤ºåœ¨æœç´¢ç»“æœä¸­ã€‚
    }
  };

  return {
    <DefaultSeo {...SEO} />
  }
}
```

ä»¥ä¸Šæ˜¯æˆ‘é€‰æ‹©çš„é»˜è®¤è®¾ç½®ï¼Œ`titleTemplate`ä¸­çš„ %s æ˜¯æ¯ä¸ªé¡µé¢å•ç‹¬è®¾ç½®çš„æ ‡é¢˜å†…å®¹ï¼Œè¿™æ ·æ‰€æœ‰çš„é¡µé¢å°±é»˜è®¤ä¼šæºå¸¦ %s
åé¢çš„æ¨¡æ¿ã€‚å…¶ä»–çš„é…ç½®å¯ä»¥å‚è€ƒ`next-seo`çš„[æ–‡æ¡£](https://github.com/garmeeh/next-seo)

æ¥ç€æ¥å•ç‹¬é…ç½®æ¯ä¸ªé¡µé¢çš„å†…å®¹ï¼Œéœ€è¦åœ¨ç›¸åº”é¡µé¢å¼•å…¥`NextSEO`ï¼Œä»¥ post é¡µä¸ºä¾‹åœ¨`NextSEO`ç»„ä»¶ä¸­æ·»åŠ å¯¹åº”çš„å†…å®¹å³å¯ï¼Œ
æƒ³è¦åœ¨ç¤¾äº¤ç½‘ç«™åˆ†äº«æ—¶å‘ˆç°ä¸é”™çš„æ•ˆæœå°±éœ€è¦å¯¹ openGraph è¿›è¡Œé…ç½®

```tsx
<NextSeo
  {...SEO}
  title={post.title}
  description={post.description}
  canonical={'https://tsuizen.cn/' + post.title}
  openGraph={{
    title: `${post.title}`,
    description: `${post.description}`,
    url: 'https://tsuizen.cn/posts/' + post.title,
    type: 'article',
    article: {
      publishedTime: post.createdAt,
      modifiedTime: post.updatedAt,
      authors: ['Tsuizen'],
      tags: post.tags
    },
    images: []
  }}
/>
```

æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ç½‘é¡µä¸­æ·»åŠ ç»“æ„åŒ–æ•°æ®è®©è°·æ­Œè¯»å–ï¼Œé’ˆå¯¹ä¸åŒçš„ç½‘é¡µç±»å‹ä½œä¸åŒçš„æœç´¢ç»“æœå‘ˆç°
åœ¨åšå®¢é¡µé¢ï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ª Article çš„ç»“æ„åŒ–æ•°æ®ç”¨æ¥æè¿°æ–‡ç« ä¿¡æ¯

```tsx
<ArticleJsonLd
  url={`https://tsuizen.cn/posts/${post.title}`}
  title={post.title}
  images={[]}
  datePublished={post.createdAt}
  dateModified={post.updatedAt}
  authorName={[
    {
      name: 'Tsuizen',
      url: 'https://tsuizen.cn'
    }
  ]}
  publisherName="Tsuizen"
  publisherLogo="https://tsuizen.cn/images/logo.png"
  description={post.description}
  isAccessibleForFree={true}
/>
```

åœ¨ç½‘é¡µä¸­ä¼šè¢«å±•å¼€æˆå¦‚ä¸‹å½¢å¼

```html
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "datePublished": "2023-01-18T00:00:00.000Z",
    "description": "èº«ä¸ºç å†œæ€ä¹ˆèƒ½æ²¡æœ‰è‡ªå·±çš„åšå®¢ï¼Œç”±äºåšå®¢å›­çš„æ•´æ”¹é£æ³¢ï¼Œå‡ºäºå®‰å…¨åŸå› å†³å®šè‡ªå·±æ­å»ºï¼Œé¡ºä¾¿å¯ä»¥ç»ƒä¹ æŠ€æœ¯ä»¥åŠç£ä¿ƒè‡ªå·±æ›´æ–°ğŸ§ã€‚",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://tsuizen.cn/posts/ä½¿ç”¨Next.jsæ„å»ºæˆ‘çš„ä¸ªäººåšå®¢"
    },
    "headline": "ä½¿ç”¨Next.jsæ„å»ºæˆ‘çš„ä¸ªäººåšå®¢",
    "image": [],
    "dateModified": "2023-01-18T00:00:00.000Z",
    "author": [
      { "@type": "Person", "name": "Tsuizen", "url": "https://tsuizen.cn" }
    ],
    "publisher": {
      "@type": "Organization",
      "name": "Tsuizen",
      "logo": {
        "@type": "ImageObject",
        "url": "https://tsuizen.cn/images/logo.png"
      }
    },
    "isAccessibleForFree": true
  }
</script>
```

è¿™æ ·è°·æ­Œå°±èƒ½æ ¹æ®ä½ çš„éœ€è¦å±•ç¤ºæ›´ä¸°å¯Œçš„æœç´¢ç»“æœã€‚

æœ€åå†æ¥è¯´è¯´ç«™ç‚¹åœ°å›¾çš„é—®é¢˜ï¼Œè¿™æ˜¯è°·æ­Œå®˜æ–¹ç»™å‡ºçš„å®šä¹‰ï¼š

> ç«™ç‚¹åœ°å›¾æ˜¯ä¸€ç§æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æä¾›ä¸æ‚¨ç½‘ç«™ä¸­çš„ç½‘é¡µã€è§†é¢‘æˆ–å…¶ä»–æ–‡ä»¶æœ‰å…³çš„ä¿¡æ¯ï¼Œè¿˜å¯ä»¥è¯´æ˜è¿™äº›å†…å®¹ä¹‹é—´çš„å…³ç³»ã€‚Google ç­‰æœç´¢å¼•æ“ä¼šè¯»å–æ­¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°æŠ“å–æ‚¨çš„ç½‘ç«™ã€‚ç«™ç‚¹åœ°å›¾ä¼šå‘Šè¯‰ Google æ‚¨è®¤ä¸ºç½‘ç«™ä¸­çš„å“ªäº›ç½‘é¡µå’Œæ–‡ä»¶æ¯”è¾ƒé‡è¦ï¼Œè¿˜ä¼šæä¾›ä¸è¿™äº›æ–‡ä»¶æœ‰å…³çš„é‡è¦ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œç½‘é¡µä¸Šæ¬¡æ›´æ–°çš„æ—¶é—´å’Œç½‘é¡µæ˜¯å¦æœ‰ä»»ä½•å¤‡ç”¨çš„è¯­è¨€ç‰ˆæœ¬ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`next-sitemap`æ¥ç”Ÿæˆç«™ç‚¹åœ°å›¾

é¦–å…ˆåœ¨æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶`next-sitemap.config.js`ï¼Œæ·»åŠ åœ°å€ï¼Œæ›´æ–°é¢‘ç‡ç­‰éœ€è¦çš„å±æ€§ï¼Œç„¶åæ ¹æ®éœ€è¦å¯ä»¥åœ¨ transform å‡½æ•°ä¸­é…ç½®ä¸åŒç›¸å¯¹è·¯å¾„ä¸­çš„å±æ€§
ï¼Œè¿™é‡Œæˆ‘ä¿®æ”¹äº†ä¸åŒé¡µé¢å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œæ›´å¤šçš„å±æ€§ç”¨æ³•å¯ä»¥å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://github.com/iamvishnusankar/next-sitemap)

```javascript
/** @type {import('next-sitemap').IConfig} */

module.exports = {
  siteUrl: 'https://tsuizen.cn',
  changefreq: 'daily',
  priority: 1,
  sitemapSize: 5000,
  generateRobotsTxt: true,
  // exclude: ['/protected-page', '/awesome/secret-page'],
  // alternateRefs: [
  //   {
  //     href: 'https://tsuizen.cn',
  //     hreflang: 'cn'
  //   }
  // ],
  // Default transformation function
  transform: async (config, path) => {
    const result = {
      loc: 'https://tsuizen.cn' + path, // => this will be exported as http(s)://<config.siteUrl>/<path>
      changefreq: config.changefreq,
      priority: config.priority,
      lastmod: config.autoLastmod ? new Date().toISOString() : undefined,
      alternateRefs: config.alternateRefs ?? []
    };
    if (path.startsWith('/tag')) {
      result.priority = 0.6;
    }
    if (path.startsWith('/posts')) {
      result.priority = 1;
      this.changefreq = 'always';
    }
    if (path.startsWith('/category')) {
      result.priority = 0.4;
    }
    if (path.startsWith('/archives')) {
      result.priority = 0.3;
    }
    return result;
  },
  // additionalPaths: async (config) => [
  //   await config.transform(config, '/additional-page')
  // ],
  robotsTxtOptions: {
    policies: [
      {
        userAgent: '*',
        allow: '/'
      },
      {
        userAgent: 'test-bot',
        allow: ['/path', '/path-2']
      }
      // {
      //   userAgent: 'black-listed-bot',
      //   disallow: ['/sub-path-1', '/path-2']
      // }
    ],
    additionalSitemaps: []
  }
};
```

ç„¶ååœ¨`package.json`ä¸­å¯ä»¥åœ¨ postbuild å‘¨æœŸä¸­é…ç½®è„šæœ¬åœ¨æ‰“åŒ…åæ‰§è¡Œå³å¯

```json
"postbuild": "next-sitemap",
```

ç„¶åæˆ‘ä»¬å°±èƒ½çœ‹åˆ° public ä¸‹ç”Ÿæˆäº†å¯¹åº”çš„ç«™ç‚¹ xml æ–‡ä»¶å’Œ robots.txt

## æ€»ç»“

è¿™ç‰‡æ–‡ç« ä¸»è¦è®²äº†æˆ‘åœ¨åšå®¢ä¸­ç”¨åˆ°çš„æŠ€æœ¯æ ˆï¼Œå¹¶æ²¡æœ‰è¯¦ç»†çš„ä»‹ç»å¤ªå¤šå…·ä½“å®ç°ï¼Œ
